<!doctype html>
<html lang="en" class="h-100">


{{element->header_app.html}}

<body class="body-scroll d-flex flex-column h-100 menu-overlay">
    <!-- screen loader -->
    {{element->loader.html}}

    <!-- Begin page content -->
    <main class="flex-shrink-0">
        <!-- Fixed navbar -->
        {{element->navheader.html}}
        <div class="product-image-top" style="background-color:white;">
            <img id="img" style="width:100%;height:auto;" src="img/image-3.png" alt="">
        </div>
        <!-- page content start -->
        <div class="container top-30" id="container">
            <div class="card">
                <div class="card-body">
                    <div class="row">
                        <div class="col">
                            <h5 id="title"></h5>
                        </div>
                    </div>
                    <div class="row pt-2">
                        <div class="col">
                            <p class="text-muted small" id="description"></p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <p class="small vm">
                                <span class=" text-secondary" id="category"></span>
                            </p>
                        </div>
                    </div>
                    <div class="row" id="pj">
											<div class="border-top border-color col pt-2">
												<i class="bi bi-paperclip" style="font-size: 20px; color: #1D68D5"></i>
												<span class="small" style="font-size: .8rem; color: #1D68D5"></span>
											</div>
										</div>
                </div>
                <div class="card-body border-top border-color">
                    <p class="small text-secondary" id="content" style="text-align: justify;">
                    </p>
                </div>
            </div>
        </div>

        <script>
					window.addEventListener('load', async () => {
						const actualite = await fetchActualite();
						addEventListenersToDomElements(actualite);
					});

					const isAndroidPhone = () => {
						return navigator.userAgent.toLowerCase().search("android") >= 0;
					};

					const openExternalLink = (url) => {
						if (isAndroidPhone) { // works on android devices only 
							url += '?gbOpenExternal=1';
						}
						window.open(url, '_blank');
					};

					const fetchActualite = async () => {
						const urlParams = new URLSearchParams(window.location.search);
						const actualiteId = urlParams.get('id');
						const url = `/api/new/${actualiteId}`;
						const resp = await fetch(url);
						const respJson = await resp.json()
						if (respJson.success === false) {
							return undefined;
						}
						return respJson.data;
					};

					const addEventListenersToDomElements = (actualite) => {
						const pjBtn = document.querySelector('#pj');
						if (actualite.pj) {
							pjBtn.addEventListener('click', () => {
								openExternalLink(actualite.pj);
							});
							const spanEl = pjBtn.querySelector('span');
							spanEl.innerHTML = actualite.pjname || 'Piece Jointe';
						} else {
							pjBtn.style.display = 'none';
						}
					};

            var url = new URLSearchParams(window.location.search);
            fetch("/api/new/" + url.get('id')).then(response => response.json()).then(_data => {
                var actualite = _data.data;
                document.getElementById("title").innerHTML = '<strong>' + actualite.title + '</strong>';
                document.getElementById("content").innerHTML = actualite.content;
                document.getElementById("description").innerHTML = actualite.description;
                if (actualite.img) {
                    document.getElementById("img").src = actualite.img;
                } else {
                    document.getElementById("img").src = localStorage['entity_logo'];
                }
            }).catch((error) => {
                console.log(error);
            })
        </script>

        <div class="container py-3">
            {{element->navbar.html}}
        </div>

    </main>
    <!-- page level custom script -->
    <script>
        "use strict"
        $(window).on('load', function () {

        });
    </script>

    <style>
        @font-face {
            font-family: 'Poppins Regular';
            font-style: normal;
            font-weight: normal;
            src: local('Poppins Regular'), url('/library/Poppins-Regular.woff') format('woff');
        }

        * {
            font-family: 'Poppins Regular' !important;
        }

        body {
            font-family: 'Poppins Regular' !important;
        }
    </style>
    {{element->footer_app.html}}

</body>
<!-- Mirrored from maxartkiller.com/website/Nauticspot/property-details.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 31 Aug 2020 16:50:04 GMT -->
</html>
