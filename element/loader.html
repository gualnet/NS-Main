<div class="container-fluid h-100 loader-display">
	<div class="row h-100">
		<div class="align-self-center col-12 text-center">
			<img style="width:100%;height:auto;" class="p-0" id="loader_entity_logo" src="" />
			<div style="width:100%;height:100%;" class="logo-loading">
				<div class="row">
					<div class="col-12">
						<!--<h4 class="mt-0 mb-4" style="color:#10348A;" id="loader_entity_name"></h4>-->
						<div class="loader-ellipsis">
							<div></div>
							<div></div>
							<div></div>
							<div></div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<script src="js/jquery-3.3.1.min.js"></script>

<script>
	window.addEventListener('load', async () => {
		var urlParam = new URLSearchParams(window.location.search);
		if (localStorage['entity_logo']) {
			document.getElementById('loader_entity_logo').src = localStorage['entity_logo'];
		}
		const entityId = localStorage['entity_id'] || urlParam.get('entity');
		if (entityId) {
			try {
				const entity = await Loader_fetchEntityData(entityId);
				setTimeout(function () {
					$('.loader-display').fadeOut('slow');
				}, 500);
				console.log('entity', entity);

				document.getElementById('loader_entity_logo').src = entity.logo;
				localStorage['entity_logo'] = entity.logo;
				localStorage['absence_module'] = entity.absence_module;
				localStorage['security_module'] = entity.security_module;
			} catch (error) {
				console.log('[ERROR]', error);
			}
		}
	});

	const Loader_fetchEntityData = async (entityId) => {
		const response = await fetch(`/api/entity/get/${entityId}`);
		const responseJson = await response.json();
		const entityData = responseJson.data;
		return (entityData);
	};

</script>


